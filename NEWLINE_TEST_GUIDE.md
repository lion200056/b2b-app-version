# 📝 換行顯示功能測試指南

## 🎯 測試目的
驗證「更新功能描述」及其他多行文字欄位在前端介面中能正確保留和顯示換行格式。

## 🔧 已修復的問題
1. **瀏覽器快取問題** - 修正 Nginx 快取設定
2. **換行顯示問題** - 修正前端 JavaScript 顯示邏輯

## 📋 測試步驟

### 步驟 1：清除瀏覽器快取
```
1. 開啟瀏覽器開發者工具 (F12)
2. 右鍵點擊重新整理按鈕
3. 選擇「硬式重新整理」或「清空快取並硬式重新整理」
```

### 步驟 2：訪問系統
```
開啟瀏覽器訪問: http://localhost
```

### 步驟 3：查看現有測試資料
```
1. 找到版本 "v2.4.0"（應該在列表最上方）
2. 點擊該版本標題展開詳細資訊
3. 查看「更新功能描述」區塊
```

#### ✅ 預期結果：
```
更新功能描述：
測試換行功能：
第一行：新增用戶註冊功能
第二行：優化登入流程
第三行：修復已知問題
```

#### ❌ 如果顯示錯誤：
```
更新功能描述：測試換行功能：第一行：新增用戶註冊功能第二行：優化登入流程第三行：修復已知問題
```

### 步驟 4：測試編輯功能
```
1. 點擊右上角「🔒 編輯模式」
2. 輸入密碼：admin123
3. 點擊版本 v2.4.0 右側的編輯按鈕 ✏️
4. 在「更新功能描述」欄位中修改或新增內容，包含換行
   例如：
   新增功能：
   • 用戶註冊流程優化
   • 登入介面美化
   • 密碼安全性提升
   
   修復問題：
   • 解決登入閃退
   • 修復註冊驗證
5. 點擊「儲存」
6. 退出編輯模式
7. 重新展開該版本，確認換行正確顯示
```

### 步驟 5：測試其他欄位
檢查以下欄位是否也正確支援換行：

#### A. 現在進度說明
- 應該顯示為多行格式
- 在藍色背景的區塊中

#### B. 送審文案  
- 應該保留換行格式
- 在藍色背景的區塊中

#### C. 其他備註
- 應該支援多行顯示
- 在灰色背景的區塊中

## 🔍 技術驗證

### 檢查 JavaScript 載入
```bash
# 檢查 JS 檔案的快取設定
curl -I http://localhost/app.js

# 應該看到：
# Cache-Control: max-age=300
# Cache-Control: public, no-cache
```

### 檢查 API 資料
```bash
# 檢查資料庫中的換行符號
curl http://localhost/api/versions | jq '.[0].description'

# 應該看到包含 \n 的字串
```

### 檢查容器中的檔案
```bash
# 檢查前端容器中的 JavaScript 是否包含修正
docker exec app-version-frontend grep "whitespace-pre-wrap" /usr/share/nginx/html/app.js

# 應該看到 4 行包含 whitespace-pre-wrap 的內容
```

## 🚨 故障排除

### 問題 1：仍然看不到換行
**解決方案：**
```
1. 強制重新整理瀏覽器 (Ctrl+F5 或 Cmd+Shift+R)
2. 清除瀏覽器快取和 Cookie
3. 確認系統時間與服務器時間一致
```

### 問題 2：編輯功能無法使用
**解決方案：**
```
1. 確認後端服務正常運行：curl http://localhost:8000/
2. 檢查管理密碼：admin123
3. 查看瀏覽器控制台是否有 JavaScript 錯誤
```

### 問題 3：資料未保存
**解決方案：**
```
1. 檢查後端 API 連線：curl http://localhost:8000/api/versions
2. 確認資料庫檔案權限：ls -la data/app_versions.db
3. 查看後端容器日誌：docker-compose logs backend
```

## ✅ 測試檢查清單

- [ ] v2.4.0 版本的「更新功能描述」正確顯示多行
- [ ] 「現在進度說明」支援換行顯示
- [ ] 編輯模式可以輸入和保存多行文字
- [ ] 「送審文案」欄位支援換行（如果有資料）
- [ ] 「其他備註」欄位支援換行（如果有資料）
- [ ] 新增版本時多行文字功能正常
- [ ] 瀏覽器重新整理後換行仍然保持

## 📞 需要協助？

如果測試過程中遇到問題：

1. **檢查系統狀態**：
   ```bash
   docker-compose ps
   ```

2. **查看詳細日誌**：
   ```bash
   docker-compose logs frontend
   docker-compose logs backend
   ```

3. **重新啟動服務**：
   ```bash
   ./restart.sh
   ```

---

**測試完成後，所有多行文字欄位都應該能正確顯示換行格式！** 🎉
